(this.webpackJsonpmemo_app=this.webpackJsonpmemo_app||[]).push([[0],{26:function(e,t,n){e.exports=n(37)},37:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),r=n(11),o=n.n(r),c=n(6),l=function(e){var t=new Date(e);return t.getFullYear()+"/"+s(t.getMonth()+1)+"/"+s(t.getDate())+" "+s(t.getHours())+":"+s(t.getMinutes())},s=function(e){return("0"+e).slice(-2)},u=function(e){var t=e.id,n=e.text,a=e.isSelected,r=e.onClick;return i.a.createElement("div",{className:"note-list-row"+(a?" note-list-row-selected":""),onClick:function(){r(t)}},i.a.createElement("div",{className:"note-list-row-title"},function(e){return 0===e.trim().length}(n)?"New Note...":function(e){return e.trimStart().match(/.*/)}(n)),i.a.createElement("div",{className:"note-list-row-content"},0===n.length?"":function(e){return e.trimStart().replace(/.*/,"").trimStart().match(/.*/)}(n)))},d=function(e){var t=e.filteredList,n=e.selectedNoteId,a=e.onClickRow;return i.a.createElement("div",{className:"note-list"},null===n?i.a.createElement("div",{className:"note-list-message"},"No Notes"):t.map((function(e){return i.a.createElement(u,{key:e.id,id:e.id,text:e.text,isSelected:e.id===n,onClick:a})})))},m="ADD_NOTE",f="TRASH_NOTE",p="RESTORE_NOTE",N="DELETE_NOTE",b="CHANGE_FILTER",g=0,E=function(e){return{type:"SELECT_NOTE",payload:{id:e}}},O=function(e,t){return{type:b,payload:{id:e,noteFilter:t}}},v=function(e){return{type:"UPDATE_VISIBLE_ID",payload:{noteFilter:e}}},y=Object(c.b)((function(e){return{filteredList:e.notes.noteList.filter((function(t){return e.notes.visibleIdList.includes(t.id)})),selectedNoteId:e.selectedNoteId}}),(function(e){return{onClickRow:function(t){e(E(t))}}}))(d),h=Date.now(),j=h+1,L={id:h,filterName:"SHOW_ALL"},T=function(e){var t=e.noteFilter,n=e.onClickAddButton;return i.a.createElement("div",{className:"note-list-utility"},i.a.createElement("span",{className:"icon menu-button"},"\ue90b"),i.a.createElement("span",{className:"icon tooltip add-button"+(t.id===j?" button-disable":""),"data-tooltip":"Add Note",onClick:function(){n(t,Date.now())}},"\ue905"))},k=Object(c.b)((function(e){return{noteFilter:e.noteFilter}}),(function(e){return{onClickAddButton:function(t,n){e(function(e,t){return{type:m,payload:{id:g++,defaultTag:e,created:t}}}(t,n))}}}))(T),w=function(){return i.a.createElement("div",{className:"note-list-pane"},i.a.createElement(k,null),i.a.createElement(y,null))},x=function(e){var t=e.noteFilter,n=e.onClickMainFilter;return i.a.createElement("div",{className:"main-filter-list"},i.a.createElement("div",{className:"show-all-button"+(t.id===h?" filter-selected":""),onClick:function(){n(h,"SHOW_ALL")}},i.a.createElement("span",{className:"icon filter-list-icon"},"\ue90d"),"All Note"),i.a.createElement("div",{className:"show-trash-button"+(t.id===j?" filter-selected":""),onClick:function(){n(j,"SHOW_TRASH")}},i.a.createElement("span",{className:"icon filter-list-icon"},"\ue90f"),"Trash"))},I=Object(c.b)((function(e){return{noteFilter:e.noteFilter}}),(function(e){return{onClickMainFilter:function(t,n){e(O(t,n))}}}))(x),C=n(14),_=function(e){var t=e.tag,n=e.noteFilter,a=e.onClick;return i.a.createElement("div",{className:"tag-filter-list-row"+(n.id===t.id?" filter-selected":""),onClick:function(){a(t.id,t.tagName)}},i.a.createElement("span",{className:"icon-delete-1 delete-tag-button"}),i.a.createElement("span",{className:"tag-filter-list-row-name"},t.tagName))},D=function(e){var t=e.noteFilter,n=e.tagList,r=e.onClickTagFilter,o=Object(a.useState)(!1),c=Object(C.a)(o,2),l=c[0],s=c[1];return i.a.createElement("div",{className:"tag-filter-list"+(l?" list-editing":"")},i.a.createElement("div",{className:"tag-filter-list-header"},i.a.createElement("span",{className:"icon filter-list-icon"},"\ue90e"),"Tags",i.a.createElement("span",{className:"edit-filter-list-button",onClick:function(){s(!l)}},l?"Done":"Edit")),n.map((function(e){return i.a.createElement(_,{key:e.id,noteFilter:t,tag:e,onClick:r})})))},F=Object(c.b)((function(e){return{noteFilter:e.noteFilter,tagList:e.tagList}}),(function(e){return{onClickTagFilter:function(t,n){e(O(t,n))}}}))(D),A=function(){return i.a.createElement("div",{className:"filter-list-pane"},i.a.createElement(I,null),i.a.createElement(F,null))},S=n(20),R=n(21),B=n(24),H=n(22),M=n(25),G=function(e){function t(e){var n;return Object(S.a)(this,t),(n=Object(B.a)(this,Object(H.a)(t).call(this,e))).textAreaRef=i.a.createRef(),n}return Object(M.a)(t,e),Object(R.a)(t,[{key:"componentDidUpdate",value:function(){this.textAreaRef.current.focus()}},{key:"render",value:function(){var e=this;return i.a.createElement("textarea",{className:"editor-area",ref:this.textAreaRef,readOnly:null===this.props.selectedNoteId,value:null===this.props.selectedNoteId?"":this.props.text,onChange:function(t){e.props.onChange(t,e.props.selectedNoteId,Date.now())}})}}]),t}(i.a.Component),P=function(e,t){if(0!==e.length&&null!==t)return e.find((function(e){return e.id===t})).text},K=Object(c.b)((function(e){return{selectedNoteId:e.selectedNoteId,text:P(e.notes.noteList,e.selectedNoteId)}}),(function(e){return{onChange:function(t,n,a){e(function(e,t,n){return{type:"UPDATE_TEXT",payload:{id:e,text:t,modified:n}}}(n,t.target.value,a))}}}))(G),U=function(e){var t=e.isOpen,n=e.setIsOpen,a=e.selectedNote;return o.a.createPortal(i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:"modal-outer"+(t?" modal-outer-open":""),onClick:function(){n(!1)}}),i.a.createElement("div",{className:"modal-inner"+(t?" modal-inner-open":"")},i.a.createElement("div",{className:"modal-title"},"Info",i.a.createElement("span",{className:"icon close-button",onClick:function(){n(!1)}},"\ue912")),i.a.createElement("div",null,"\u4f5c\u6210\u65e5"),i.a.createElement("div",null,l(a.created)),i.a.createElement("div",null,"\u66f4\u65b0\u65e5"),i.a.createElement("div",null,l(a.modified)),i.a.createElement("div",null,a.text.replace(/\r?\n/g,"").length,"\u6587\u5b57"))),document.querySelector("#modal"))},W=function(e){var t=e.selectedNote,n=e.noteFilter,r=e.selectedNoteId,o=e.onClickTrashButton,c=e.onClickRestoreButton,l=e.onClickDeleteButton,s=Object(a.useState)(!1),u=Object(C.a)(s,2),d=u[0],m=u[1];return i.a.createElement("div",{className:"editor-utility"},null!==r&&i.a.createElement(i.a.Fragment,null,n.id===j?i.a.createElement(i.a.Fragment,null,i.a.createElement("span",{className:"icon restore-button tooltip","data-tooltip":"Restore Note",onClick:function(){c(r)}},"\ue910"),i.a.createElement("span",{className:"icon delete-button tooltip","data-tooltip":"Delete Note",onClick:function(){l(r)}},"\ue914")):i.a.createElement("span",{className:"icon trash-button tooltip","data-tooltip":"Trash Note",onClick:function(){o(r)}},"\ue90f"),i.a.createElement("span",{className:"separator"}),i.a.createElement("span",{className:"icon preview-button tooltip","data-tooltip":"Markdown Preview"},"\ue906"),i.a.createElement("span",{className:"icon info-button",onClick:function(){return m(!0)}},"\ue90a"),i.a.createElement(U,{isOpen:d,setIsOpen:m,selectedNote:t})))},V=Object(c.b)((function(e){return{selectedNote:e.notes.noteList[e.notes.noteList.findIndex((function(t){return t.id===e.selectedNoteId}))],noteFilter:e.noteFilter,selectedNoteId:e.selectedNoteId}}),(function(e){return{onClickTrashButton:function(t){e(function(e){return{type:f,payload:{id:e}}}(t))},onClickRestoreButton:function(t){e(function(e){return{type:p,payload:{id:e}}}(t))},onClickDeleteButton:function(t){e(function(e){return{type:N,payload:{id:e}}}(t))}}}))(W),J=function(e){var t=e.tagName,n=e.onClick;return i.a.createElement("span",{className:"tag-item",onClick:n},t)},X=function(e){var t=e.selectedNoteId,n=e.onKeyDown;return i.a.createElement("input",{type:"text",className:"add-tag-field",placeholder:null===t?"":"Add a tag...",readOnly:null===t,onKeyDown:function(e){var a=e.target.value.trim();0!==a.length&&"Enter"===e.key&&229!==e.keyCode&&(n(t,Date.now(),a),e.target.value="")}})},q=function(e){var t=e.selectedNoteTags,n=e.selectedNoteId,a=e.onKeyDownHandler,r=e.onClickTag;return i.a.createElement("div",{className:"tag-area"},t.map((function(e){return i.a.createElement(J,{key:e.id,tagName:e.tagName,onClick:function(){return r(n,e.id)}})})),i.a.createElement(X,{selectedNoteId:n,onKeyDown:a}))},Y=Object(c.b)((function(e){return{selectedNoteTags:(t=e.notes.noteList,n=e.selectedNoteId,null===n?[]:t.find((function(e){return e.id===n})).tags),selectedNoteId:e.selectedNoteId};var t,n}),(function(e){return{onKeyDownHandler:function(t,n,a){e(function(e,t,n){return{type:"ADD_TAG_TO_NOTE",payload:{noteId:e,id:t,tagName:n}}}(t,n,a)),e(function(e,t){return{type:"ADD_TAG_TO_LIST",payload:{id:e,tagName:t}}}(n,a))},onClickTag:function(t,n){e(function(e,t){return{type:"REMOVE_TAG_FROM_NOTE",payload:{noteId:e,id:t}}}(t,n))}}}))(q),$=function(){return i.a.createElement("div",{className:"editor-pane"},i.a.createElement(V,null),i.a.createElement("div",{className:"editor-area-container"},i.a.createElement(K,null),i.a.createElement(Y,null)))},z=function(){return i.a.createElement("div",{className:"base"},i.a.createElement(A,null),i.a.createElement(w,null),i.a.createElement($,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Q=n(23),Z=n(8),ee=n(4),te={noteList:[],visibleIdList:[]},ne=function(e,t){return e.findIndex((function(e){return e.id===t}))},ae=function(e,t){switch(t.id){case h:return e.filter((function(e){return!e.isTrashed})).map((function(e){return e.id}));case j:return e.filter((function(e){return e.isTrashed})).map((function(e){return e.id}));default:return e.filter((function(e){return e.tags.some((function(e){return e.tagName===t.filterName}))&&!e.isTrashed})).map((function(e){return e.id}))}},ie=Object(Z.c)({notes:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:te,n=arguments.length>1?arguments[1]:void 0;switch(n.type){case m:return Object.assign({},t,{noteList:[{id:n.payload.id,text:"",tags:n.payload.defaultTag.id===h?[]:[{id:n.payload.defaultTag.id,tagName:n.payload.defaultTag.filterName}],created:n.payload.created,modified:n.payload.created,isTrashed:!1}].concat(Object(ee.a)(t.noteList)),visibleIdList:[n.payload.id].concat(Object(ee.a)(t.visibleIdList))});case"UPDATE_TEXT":return e=ne(t.noteList,n.payload.id),Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),[Object.assign({},t.noteList[e],{text:n.payload.text,modified:n.payload.modified})],Object(ee.a)(t.noteList.slice(e+1)))});case f:return e=ne(t.noteList,n.payload.id),Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),[Object.assign({},t.noteList[e],{isTrashed:!0})],Object(ee.a)(t.noteList.slice(e+1)))});case p:return e=ne(t.noteList,n.payload.id),Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),[Object.assign({},t.noteList[e],{isTrashed:!1})],Object(ee.a)(t.noteList.slice(e+1)))});case N:return e=ne(t.noteList,n.payload.id),Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),Object(ee.a)(t.noteList.slice(e+1)))});case"UPDATE_VISIBLE_ID":return Object.assign({},t,{visibleIdList:ae(t.noteList,n.payload.noteFilter)});case"ADD_TAG_TO_NOTE":e=ne(t.noteList,n.payload.noteId);var a=t.noteList[e].tags.some((function(e){return e.tagName===n.payload.tagName}));return a?t:Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),[Object.assign({},t.noteList[e],{tags:[].concat(Object(ee.a)(t.noteList[e].tags),[{id:n.payload.id,tagName:n.payload.tagName}])})],Object(ee.a)(t.noteList.slice(e+1)))});case"REMOVE_TAG_FROM_NOTE":e=ne(t.noteList,n.payload.noteId);var i=t.noteList[e].tags.findIndex((function(e){return e.id===n.payload.id}));return Object.assign({},t,{noteList:[].concat(Object(ee.a)(t.noteList.slice(0,e)),[Object.assign({},t.noteList[e],{tags:[].concat(Object(ee.a)(t.noteList[e].tags.slice(0,i)),Object(ee.a)(t.noteList[e].tags.slice(i+1)))})],Object(ee.a)(t.noteList.slice(e+1)))});default:return t}},tagList:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_TAG_TO_LIST":var n=e.some((function(e){return e.tagName===t.payload.tagName}));return n?e:[].concat(Object(ee.a)(e),[{id:t.payload.id,tagName:t.payload.tagName}]);default:return e}},noteFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case b:return{id:t.payload.id,filterName:t.payload.noteFilter};default:return e}},selectedNoteId:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SELECT_NOTE":return t.payload.id;default:return e}}}),re=n(7),oe=n.n(re),ce=n(5),le=oe.a.mark(ge),se=oe.a.mark(Ee),ue=oe.a.mark(Oe),de=oe.a.mark(ve),me=oe.a.mark(ye),fe=oe.a.mark(he),pe=oe.a.mark(je),Ne=function(e){return e.notes.visibleIdList},be=function(e){return e.noteFilter};function ge(){var e;return oe.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=3,Object(ce.d)(m);case 3:return e=t.sent,t.next=6,Object(ce.b)(E(e.payload.id));case 6:t.next=0;break;case 8:case"end":return t.stop()}}),le)}function Ee(){var e,t;return oe.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=3,Object(ce.d)(b);case 3:return e=n.sent,n.next=6,Object(ce.b)(v({id:e.payload.id,filterName:e.payload.noteFilter}));case 6:return n.next=8,Object(ce.c)(Ne);case 8:return t=n.sent,n.next=11,Object(ce.b)(E(0===t.length?null:t[0]));case 11:n.next=0;break;case 13:case"end":return n.stop()}}),se)}function Oe(e){var t,n,a,i,r,o;return oe.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=3,Object(ce.d)(e);case 3:return t=c.sent,c.next=6,Object(ce.c)(be);case 6:return n=c.sent,c.next=9,Object(ce.c)(Ne);case 9:return a=c.sent,i=a.indexOf(t.payload.id),r=0===i?1:i-1,o=1===a.length?null:a[r],c.next=15,Object(ce.b)(v(n));case 15:return c.next=17,Object(ce.b)(E(o));case 17:c.next=0;break;case 19:case"end":return c.stop()}}),ue)}function ve(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(f);case 2:case"end":return e.stop()}}),de)}function ye(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(p);case 2:case"end":return e.stop()}}),me)}function he(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Oe(N);case 2:case"end":return e.stop()}}),fe)}function je(){return oe.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ce.a)(ge);case 2:return e.next=4,Object(ce.a)(Ee);case 4:return e.next=6,Object(ce.a)(ve);case 6:return e.next=8,Object(ce.a)(ye);case 8:return e.next=10,Object(ce.a)(he);case 10:case"end":return e.stop()}}),pe)}var Le=Object(Q.a)(),Te=Object(Z.e)(ie,Object(Z.a)(Le));Le.run(je),o.a.render(i.a.createElement(c.a,{store:Te},i.a.createElement(z,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[26,1,2]]]);
//# sourceMappingURL=main.47f08834.chunk.js.map